{"version":3,"file":"serie.8639e875.js","sources":["../../src/pages/serie.jsx"],"sourcesContent":["import { For, batch, createEffect, on } from 'solid-js';\nimport { createStore, produce } from 'solid-js/store';\nimport { useNavigate, useParams } from 'solid-app-router';\n\nimport { createLocalStore, createLocalSignal } from '../data/store'\n\nimport './general.sass'\nimport './serie.sass'\n\nexport default () => {\n\tconst params = useParams()\n\tconst navigate = useNavigate()\n\tconst [series, setSeries] = createLocalStore('Series')\n\tconst serieIndex = series.findIndex(s => s.name === params.serie)\n\tconst [seasons, setSeasons] = createStore(series[serieIndex].seasons)\n\tconst activeSeason = seasons.findIndex(e => e.some(it => !it))\n\tconst [expand, setExpand] = createStore(seasons.map((_, i) => activeSeason === i))\n\tconst [addCount, setAddCount] = createLocalSignal('AddCount', '1')\n\tconst addSeason = () => batch(() => {\n\t\tsetSeasons(s => [...s, []])\n\t\tsetExpand(e => [...e, true])\n\t})\n\tconst removeSeason = () => batch(() => {\n\t\tsetSeasons(s => s.slice(0, s.length - 1))\n\t\tsetExpand(e => e.slice(0, e.length - 1))\n\t})\n\tconst addEpisode = index => batch(() => {\n\t\tsetSeasons(index, it => [...it, 0])\n\t\tsetExpand(index, () => true)\n\t})\n\tconst removeEpisode = index => batch(() => {\n\t\tsetSeasons(index, it => it.slice(0, it.length - 1))\n\t\tsetExpand(index, () => true)\n\t})\n\tconst addEpisodes = index => batchEpisodeChange(() => addEpisode(index))\n\tconst removeEpisodes = index => batchEpisodeChange(() => removeEpisode(index))\n\tconst batchEpisodeChange = action => batch(() => Array.from({ length: addCount() }).forEach(action))\n\tconst toggleState = (index, episode) => setSeasons(index, produce(it => it[episode] = intNot(it[episode])))\n\tconst intNot = num => num ? 0 : 1\n\tcreateEffect(() => batch(() => {\n\t\tsetSeries(serieIndex, { name: params.serie, seasons: seasons })\n\t}))\n\tfunction addToAddCount(value) {\n\t\tconst num = +addCount() + value\n\t\tsetAddCount(num <= 1 ? 1 : num)\n\t}\n\tconst onBackPressed = () => navigate('/')\n\tconst onTitleClicked = index => setExpand(index, e => !e)\n\tconst titleClassByExpand = exp => `${exp ? 'middle-button' : 'left-round-button'}`\n\treturn <>\n\t\t<div class='middle'>\n\t\t\t<div id='title' class='round-button solid-button'>{params.serie}</div>\n\t\t</div>\n\t\t<div id='header1' class='spread'>\n\t\t\t<div class='button-stack'>\n\t\t\t\t<button class='left-button' onClick={removeSeason}>\n\t\t\t\t\t<img class='center-image' src='/remove.svg'></img>\n\t\t\t\t</button>\n\t\t\t\t<div class='middle-button solid-button'>Season</div>\n\t\t\t\t<button class='right-button' onClick={addSeason}>\n\t\t\t\t\t<img class='center-image' src='/add.svg'></img>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<button id='back-button' class='circle-button' onClick={onBackPressed}>\n\t\t\t\t<img src='/left-arrow.svg' class='center-image'></img>\n\t\t\t</button>\n\t\t</div>\n\t\t<div id='header2' class='right-side'>\n\t\t\t<span>Â±</span>\n\t\t\t<div id='add-count' class='button-stack'>\n\t\t\t\t<button class='left-button' onClick={() => addToAddCount(-1)}>\n\t\t\t\t\t<img class='center-image' src='/remove.svg'></img>\n\t\t\t\t</button>\n\t\t\t\t<div class='middle-button solid-button'>{addCount()}</div>\n\t\t\t\t<button class='right-button' onClick={() => addToAddCount(1)}>\n\t\t\t\t\t<img class='center-image' src='/add.svg'></img>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<span>episode{addCount() == 1 ? '' : 's'}</span>\n\t\t</div>\n\t\t<For each={seasons}>{(season, index) =>\n\t\t\t<>\n\t\t\t\t<div class='button-stack serie-title'>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass={titleClassByExpand(expand[index()])}\n\t\t\t\t\t\tonClick={() => onTitleClicked(index())}\n\t\t\t\t\t>\n\t\t\t\t\t\tSeason {index() + 1}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class='rect-button' onClick={() => removeEpisodes(index())}>\n\t\t\t\t\t\t<img class='center-image' src='/remove.svg'></img>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class='right-button' onClick={() => addEpisodes(index())}>\n\t\t\t\t\t\t<img class='center-image' src='/add.svg'></img>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<details open={expand[index()]}>\n\t\t\t\t\t<summary style='display:none;'></summary>\n\t\t\t\t\t<div class='reverse-middle-button solid-button season-content'>\n\t\t\t\t\t\t<For each={season}>{(state, episode) =>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass={`episode ${state ? 'seen' : 'new'}`}\n\t\t\t\t\t\t\t\tonClick={() => toggleState(index(), episode())}>\n\t\t\t\t\t\t\t\tEpisode {episode() + 1}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t</For>\n\t\t\t\t\t</div>\n\t\t\t\t</details>\n\t\t\t</>\n\t\t}\n\t\t</For>\n\t</>\n}\n"],"names":["serie","params","useParams","navigate","useNavigate","series","setSeries","createLocalStore","serieIndex","findIndex","s","name","seasons","setSeasons","createStore","activeSeason","e","some","it","expand","setExpand","map","_","i","addCount","setAddCount","createLocalSignal","addSeason","batch","removeSeason","slice","length","addEpisode","index","removeEpisode","addEpisodes","batchEpisodeChange","removeEpisodes","action","Array","from","forEach","toggleState","episode","produce","intNot","num","createEffect","addToAddCount","value","onBackPressed","onTitleClicked","titleClassByExpand","exp","_el$","_tmpl$","_el$2","_$insert","_el$3","_tmpl$2","_el$4","_el$5","_el$6","_el$7","_el$8","_el$9","_tmpl$3","_el$10","_el$11","_el$12","_el$13","_el$14","_el$15","_$createComponent","For","season","_el$17","_tmpl$4","_el$18","_el$20","_el$21","_$effect","_$className","_el$22","_tmpl$5","_el$23","_el$24","state","_el$25","_tmpl$6","_$delegateEvents"],"mappings":"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"}