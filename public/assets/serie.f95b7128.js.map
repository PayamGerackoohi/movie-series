{"version":3,"file":"serie.f95b7128.js","sources":["../../src/pages/serie.jsx"],"sourcesContent":["import { For, batch, createEffect } from 'solid-js';\nimport { createStore, produce } from 'solid-js/store';\nimport { Link, useParams } from 'solid-app-router';\n\nimport { createLocalStore, createLocalSignal } from '../data/store'\n\nimport './serie.sass'\n\nexport default () => {\n\tconst params = useParams()\n\tconst [series, setSeries] = createLocalStore('Series')\n\tconst serieIndex = series.findIndex(s => s.name === params.serie)\n\tconst [seasons, setSeasons] = createStore(series[serieIndex].seasons)\n\tconst activeSeason = seasons.findIndex(e => e.some(it => !it))\n\tconst [expand, setExpand] = createStore(seasons.map((_, i) => activeSeason === i))\n\tconst [addCount, setAddCount] = createLocalSignal('AddCount', 1)\n\tconst addSeason = () => batch(() => {\n\t\tsetSeasons(s => [...s, []])\n\t\tsetExpand(e => [...e, true])\n\t})\n\tconst removeSeason = () => batch(() => {\n\t\tsetSeasons(s => s.slice(0, s.length - 1))\n\t\tsetExpand(e => e.slice(0, e.length - 1))\n\t})\n\tconst addEpisode = index => batch(() => {\n\t\tsetSeasons(index, it => [...it, 0])\n\t\tsetExpand(index, () => true)\n\t})\n\tconst removeEpisode = index => batch(() => {\n\t\tsetSeasons(index, it => it.slice(0, it.length - 1))\n\t\tsetExpand(index, () => true)\n\t})\n\tconst addEpisodes = index => batchEpisodeChange(() => addEpisode(index))\n\tconst removeEpisodes = index => batchEpisodeChange(() => removeEpisode(index))\n\tconst batchEpisodeChange = action => batch(() => Array.from({ length: addCount() }).forEach(action))\n\tconst toggleState = (index, episode) => setSeasons(index, produce(it => it[episode] = intNot(it[episode])))\n\tconst intNot = num => num ? 0 : 1\n\tcreateEffect(() => batch(() => {\n\t\tsetSeries(serieIndex, { name: params.serie, seasons: seasons })\n\t}))\n\tfunction addCountChanged(e) {\n\t\tconst num = e.currentTarget.valueAsNumber\n\t\tsetAddCount(num)\n\t\tif (!num || num <= 1)\n\t\t\tsetAddCount(1)\n\t}\n\treturn <>\n\t\t<Link href='/'>Back</Link>\n\t\t<span>{' - '}</span>\n\t\t<label>Episode Add/Remove Count:{' '}\n\t\t\t<input type='number' value={addCount()} onInput={addCountChanged} />\n\t\t</label>\n\t\t<p>Serie: {params.serie}\n\t\t\t<button onClick={addSeason}>+</button>\n\t\t\t<button onClick={removeSeason}>-</button>\n\t\t</p>\n\t\t<For each={seasons}>{(season, index) =>\n\t\t\t<details open={expand[index()]}>\n\t\t\t\t<summary empty={season.length === 0 ? '' : undefined}>\n\t\t\t\t\tSeason {index() + 1}\n\t\t\t\t\t<button onClick={() => addEpisodes(index())}>+</button>\n\t\t\t\t\t<button onClick={() => removeEpisodes(index())}>-</button>\n\t\t\t\t</summary>\n\t\t\t\t<For each={season}>{(state, episode) =>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass={state ? 'seen' : 'new'}\n\t\t\t\t\t\tonClick={() => toggleState(index(), episode())}>\n\t\t\t\t\t\tEpisode {episode() + 1}\n\t\t\t\t\t</button>\n\t\t\t\t}\n\t\t\t\t</For>\n\t\t\t</details>\n\t\t}\n\t\t</For>\n\t</>\n}\n"],"names":["serie","params","useParams","series","setSeries","createLocalStore","serieIndex","findIndex","s","name","seasons","setSeasons","createStore","activeSeason","e","some","it","expand","setExpand","map","_","i","addCount","setAddCount","createLocalSignal","addSeason","batch","removeSeason","slice","length","addEpisode","index","removeEpisode","addEpisodes","batchEpisodeChange","removeEpisodes","action","Array","from","forEach","toggleState","episode","produce","intNot","num","createEffect","addCountChanged","currentTarget","valueAsNumber","_$createComponent","Link","_tmpl$","_el$2","_tmpl$2","_el$3","_el$5","_$effect","_el$6","_tmpl$3","_el$7","_el$8","_el$9","_$insert","For","season","_el$10","_tmpl$4","_el$11","_el$12","_el$13","_el$14","state","_el$15","_tmpl$5","_$className","_p$","_v$","_v$2","undefined","_$setAttribute","_$delegateEvents"],"mappings":"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"}